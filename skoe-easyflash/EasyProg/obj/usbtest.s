;
; File generated by cc65 v 2.13.3
;
	.fopt		compiler,"cc65 v 2.13.3"
	.setcpu		"6502"
	.smart		on
	.autoimport	on
	.case		on
	.debuginfo	off
	.importzp	sp, sreg, regsave, regbank, tmp1, ptr1, ptr2
	.macpack	longbranch
	.export		_usbTest
	.import		_clrscr
	.import		_cputs
	.import		_ef3usb_receive_data
	.import		_ef3usb_send_data
	.import		_utilAppendHex2
	.import		_utilStr

.segment	"RODATA"

L0001:
	.byte	$D5,$D3,$C2,$20,$D4,$45,$53,$54,$20,$28,$D2,$45,$53,$45,$54,$20
	.byte	$54,$4F,$20,$45,$58,$49,$54,$29,$0A,$0D,$00

; ---------------------------------------------------------------
; void __near__ usbTest (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_usbTest: near

.segment	"BSS"

L0008:
	.res	1,$00
L0009:
	.res	1,$00

.segment	"CODE"

;
; clrscr();
;
L000D:	jsr     _clrscr
;
; cputs("USB Test (Reset to exit)\r\n");
;
	lda     #<(L0001)
	ldx     #>(L0001)
	jsr     _cputs
;
; for (i = 16; i; --i)
;
	lda     #$10
	sta     L0008
L0011:	lda     L0008
	beq     L000D
;
; ef3usb_receive_data(&ch, 1);
;
	lda     #<(L0009)
	ldx     #>(L0009)
	jsr     pushax
	ldx     #$00
	lda     #$01
	jsr     _ef3usb_receive_data
;
; utilStr[0] = 0;
;
	lda     #$00
	sta     _utilStr
;
; utilAppendHex2(ch);
;
	lda     L0009
	jsr     _utilAppendHex2
;
; cputs(utilStr);
;
	lda     #<(_utilStr)
	ldx     #>(_utilStr)
	jsr     _cputs
;
; ef3usb_send_data(&ch, 1);
;
	lda     #<(L0009)
	ldx     #>(L0009)
	jsr     pushax
	ldx     #$00
	lda     #$01
	jsr     _ef3usb_send_data
;
; for (i = 16; i; --i)
;
	dec     L0008
	jmp     L0011

.endproc

