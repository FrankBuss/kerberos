
SYMBOLS {
    __STACKSIZE__ = $0800;
}

MEMORY {
    ZP:             start = $0002, size = $001A, type = rw, define = yes;
    LORAM:          start = $07FF, size = $0801, file = %O, define = yes, fill = yes;
    RAM:            start = $1000, size = $7000, file = %O, define = yes;
    EXOBUFFER:      start = $b000, size = $1000, type = rw, define = yes;
    ZP_BACKUP:      start = $c400, size = $001A, type = rw, define = yes; # size like ZP
    HIRAM:          start = $c420, size = $0be0, type = rw, define = yes;
    BLOCK_BUFFER:   start = $c000, size = $1000, type = rw, define = yes;
    DATASETTE:      start = $033c, size = $00c0, type = rw, define = yes;
    CPUSTACK:       start = $010c, size = $00c0, type = rw, define = yes;
}

SEGMENTS {
    STARTUP:  load = LORAM, type = ro;
    LOWCODE:  load = LORAM, type = ro, optional = yes;
    LOADER:   load =   RAM, run = DATASETTE, type = rw, define = yes;
    ROMLOADER: load =  RAM, run = CPUSTACK, type = rw, define = yes;
    INIT:     load =   RAM, type = ro, define = yes, optional = yes;
    CODE:     load =   RAM, type = ro, align = $10;
    RODATA:   load =   RAM, type = ro, align = $10;
    DATA:     load =   RAM, type = rw;
    BSS:      load =   RAM, type = bss, define = yes;   # must be below HEAP
    HEAP:     load =   RAM, type = bss, optional = yes; # must sit just below stack at end of RAM
    ZEROPAGE: load =    ZP, type = zp;
    ZPSAVE:   load = HIRAM, type = bss;
}

FEATURES {
    CONDES: segment = INIT,
        type = constructor,
        label = __CONSTRUCTOR_TABLE__,
        count = __CONSTRUCTOR_COUNT__;
    CONDES: segment = RODATA,
        type = destructor,
        label = __DESTRUCTOR_TABLE__,
        count = __DESTRUCTOR_COUNT__;
    CONDES: segment = RODATA,
        type = interruptor,
        label = __INTERRUPTOR_TABLE__,
        count = __INTERRUPTOR_COUNT__;
}

MEMORY {
}
